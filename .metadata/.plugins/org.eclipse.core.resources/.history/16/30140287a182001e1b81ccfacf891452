package com.laptrinhjavaweb.service.impl;

import java.util.List;

import com.laptrinhjavaweb.dao.INewsDAO;
import com.laptrinhjavaweb.dao.impl.NewsDAO;
import com.laptrinhjavaweb.model.NewsModel;
import com.laptrinhjavaweb.service.INewsService;

public class NewsService implements INewsService {

	
	private INewsDAO newDao;
	
	public NewsService() {
		newDao = new NewsDAO();
		
	}
	@Override
	public List<NewsModel> findByCategoryId(Long categoryId) {
		return newDao.findByCategoryId(categoryId);
	}
	
	@Override
	public NewsModel save(NewsModel newsModel) {   // thêm bài viết vào db
		Long newsId = newDao.save(newsModel);      // thêm và đồng thời lấy ra id được generate auto của bài viết đó.
		// lấy ra id của bài viết mới thêm vào để phòng trường hợp ta cần show ra thông tin của bài viết mới đó.
		
		return newDao.findOne(newsId); // save xuống database rồi lại lấy ngược lên qua hàm findOne để kiểm tra đã lưu ok chưa.
	}
	
	@Override
	public NewsModel update(NewsModel updatedNews) {
		NewsModel oldNews = newDao.findOne(updatedNews.getId());
		
		// vì các trường như createdDate hay createdBy không hiện trên UI
		// nên chúng không được truyền qua api, 
		// nên ta cần lấy từ oldNews set lại vào cho updatedNews.
		updatedNews.setCreatedDate(oldNews.getCreatedDate());
		updatedNews.setCreatedBy(oldNews.getCreatedBy());
		
		return null;
	}

	
	
}
